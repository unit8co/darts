
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Metrics &#8212; darts  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/docs-favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Models" href="darts.models.html" />
    <link rel="prev" title="Metrics" href="darts.metrics.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/darts-logo-trim.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../README.html">
  Home
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../quickstart/00-quickstart.html">
  Quickstart
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../userguide.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="darts.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../release_notes/RELEASE_NOTES.html">
  Release Notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/unit8co/darts" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/unit8co" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.ad.html">
   Anomaly Detection
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.ad.aggregators.html">
     Anomaly Aggregators
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.aggregators.and_aggregator.html">
       AND Aggregator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.aggregators.ensemble_sklearn_aggregator.html">
       Ensemble scikit-learn aggregator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.aggregators.or_aggregator.html">
       OR Aggregator
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.ad.anomaly_model.html">
     Anomaly Models
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.anomaly_model.filtering_am.html">
       Filtering Anomaly Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.anomaly_model.forecasting_am.html">
       Forecasting Anomaly Model
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.ad.detectors.html">
     Anomaly Detectors
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.detectors.iqr_detector.html">
       Interquartile Range (IQR) Detector
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.detectors.quantile_detector.html">
       Quantile Detector
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.detectors.threshold_detector.html">
       Threshold Detector
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.ad.scorers.html">
     Anomaly Scorers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.difference_scorer.html">
       Difference Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.kmeans_scorer.html">
       k-means Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_cauchy_scorer.html">
       NLL Cauchy Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_exponential_scorer.html">
       NLL Exponential Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_gamma_scorer.html">
       NLL Gamma Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_gaussian_scorer.html">
       NLL Gaussian Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_laplace_scorer.html">
       NLL Laplace Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.nll_poisson_scorer.html">
       NLL Poisson Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.norm_scorer.html">
       Norm Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.pyod_scorer.html">
       PyOD Scorer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.ad.scorers.wasserstein_scorer.html">
       Wasserstein Scorer
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.ad.utils.html">
     Utils for Anomaly Detection
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.dataprocessing.html">
   Data Processing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.dataprocessing.dtw.html">
     Dynamic Time Warping (DTW)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.dtw.dtw.html">
       Dynamic Time Warping (DTW)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.dtw.window.html">
       DTW Windows
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.dataprocessing.encoders.html">
     Time Axis Encoders
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.encoders.encoder_base.html">
       Encoder Base Classes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.encoders.encoders.html">
       Time Axes Encoders
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.dataprocessing.transformers.html">
     Data Transformers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.base_data_transformer.html">
       Data Transformer Base Class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.boxcox.html">
       Box-Cox Transformer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.diff.html">
       Differencing Transformer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.fittable_data_transformer.html">
       Fittable Data Transformer Base Class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.invertible_data_transformer.html">
       Invertible Data Transformer Base Class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.mappers.html">
       Mapper and InvertibleMapper
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.midas.html">
       Mixed-data sampling (MIDAS) Transformer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.missing_values_filler.html">
       Missing Values Filler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.reconciliation.html">
       Hierarchical Reconciliation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.scaler.html">
       Scaler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.static_covariates_transformer.html">
       Static Covariates Transformer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.dataprocessing.transformers.window_transformer.html">
       Window Transformer
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.dataprocessing.pipeline.html">
     Pipeline
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.datasets.html">
   Datasets
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.explainability.html">
   Explainability
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.explainability.explainability_result.html">
     Explainability Result
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.explainability.shap_explainer.html">
     Shap Explainer for SKLearnModels
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.explainability.tft_explainer.html">
     TFT Explainer for Temporal Fusion Transformer (TFTModel)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="darts.metrics.html">
   Metrics
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Metrics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.models.html">
   Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.models.filtering.html">
     Filtering Models
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.filtering.gaussian_process_filter.html">
       Gaussian Processes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.filtering.kalman_filter.html">
       Kalman Filter
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.filtering.moving_average_filter.html">
       Moving Average
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.models.forecasting.html">
     Forecasting Models
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.arima.html">
       ARIMA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.baselines.html">
       Baseline Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.block_rnn_model.html">
       Block Recurrent Neural Networks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.catboost_model.html">
       CatBoost model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.conformal_models.html">
       Conformal Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.dlinear.html">
       D-Linear
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.exponential_smoothing.html">
       Exponential Smoothing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.fft.html">
       Fast Fourier Transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.global_baseline_models.html">
       Global Baseline Models (Naive)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.kalman_forecaster.html">
       Kalman Filter Forecaster
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.lgbm.html">
       LightGBM Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.linear_regression_model.html">
       Linear Regression model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.nbeats.html">
       N-BEATS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.nhits.html">
       N-HiTS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.nlinear.html">
       N-Linear
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.prophet_model.html">
       Facebook Prophet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.random_forest.html">
       Random Forest
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.regression_ensemble_model.html">
       Regression ensemble model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.rnn_model.html">
       Recurrent Neural Networks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_arima.html">
       AutoARIMA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_ces.html">
       AutoCES
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_ets.html">
       AutoETS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_mfles.html">
       AutoMFLES
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_tbats.html">
       AutoTBATS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_auto_theta.html">
       AutoTheta
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_croston.html">
       Croston method
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_model.html">
       StatsForecastModel
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sf_tbats.html">
       TBATS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.sklearn_model.html">
       SKLearn Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.tcn_model.html">
       Temporal Convolutional Network
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.tft_model.html">
       Temporal Fusion Transformer (TFT)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.theta.html">
       Theta Method
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.tide_model.html">
       Time-series Dense Encoder (TiDE)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.transformer_model.html">
       Transformer Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.tsmixer_model.html">
       Time-Series Mixer (TSMixer)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.varima.html">
       VARIMA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.models.forecasting.xgboost.html">
       XGBoost Model
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="darts.utils.html">
   Utils
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.utils.data.html">
     TimeSeries Datasets
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
    <label for="toctree-checkbox-17">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.data.torch_datasets.dataset.html">
       Dataset Base Class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.data.torch_datasets.inference_dataset.html">
       Inference Datasets
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.data.torch_datasets.training_dataset.html">
       Training Datasets
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="darts.utils.likelihood_models.html">
     Likelihood Models
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.likelihood_models.sklearn.html">
       Likelihoods for
       <cite>
        SKLearnModel
       </cite>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.likelihood_models.statsforecast.html">
       Likelihoods for
       <cite>
        StatsForecast
       </cite>
       Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="darts.utils.likelihood_models.torch.html">
       Likelihoods for
       <cite>
        TorchForecastingModel
       </cite>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.losses.html">
     PyTorch Loss Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.missing_values.html">
     Utils for filling missing values
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.model_selection.html">
     Model selection utilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.statistics.html">
     Time Series Statistics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.timeseries_generation.html">
     Utils for time series generation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.torch.html">
     Utils for Pytorch and its usage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.ts_utils.html">
     Additional util functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="darts.utils.utils.html">
     Additional util functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="darts.timeseries.html">
   Timeseries
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <span class="target" id="module-darts.metrics.metrics"></span><section id="metrics">
<h1>Metrics<a class="headerlink" href="#metrics" title="Permalink to this heading">¶</a></h1>
<p>Some metrics to compare time series.</p>
<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ae">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ae"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ae" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute Error (AE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[|y_t - \hat{y}_t|\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ape">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ape" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute Percentage Error (APE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and time step <span class="math notranslate nohighlight">\(t\)</span> with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \left| \frac{y_t - \hat{y}_t}{y_t} \right|\]</div>
<p>Note that it will raise a <cite>ValueError</cite> if <span class="math notranslate nohighlight">\(y_t = 0\)</span> for some <span class="math notranslate nohighlight">\(t\)</span>. Consider using
the Absolute Scaled Error (<a class="reference internal" href="#darts.metrics.metrics.ase" title="darts.metrics.metrics.ase"><code class="xref py py-func docutils literal notranslate"><span class="pre">ase()</span></code></a>) in these cases.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>actual_series</cite> contains some zeros.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.arre">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">arre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#arre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.arre" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute Ranged Relative Error (ARRE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column, (optional) quantile and time step <span class="math notranslate nohighlight">\(t\)</span> with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \left| \frac{y_t - \hat{y}_t} {\max_t{y_t} - \min_t{y_t}} \right|\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <span class="math notranslate nohighlight">\(\max_t{y_t} = \min_t{y_t}\)</span>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ase">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ase" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute Scaled Error (ASE) (see <a class="reference internal" href="#rfa0f437f94df-1" id="id1">[1]</a> for more information on scaled forecasting errors).</p>
<p>It is the Absolute Error (AE) scaled by the Mean AE (MAE) of the naive m-seasonal forecast.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{AE(y_{t_p+1:t_p+T}, \hat{y}_{t_p+1:t_p+T})}{E_m},\]</div>
<p>where <span class="math notranslate nohighlight">\(t_p\)</span> is the prediction time (one step before the first forecasted point), <span class="math notranslate nohighlight">\(AE\)</span> is the Absolute
Error (<a class="reference internal" href="#darts.metrics.metrics.ae" title="darts.metrics.metrics.ae"><code class="xref py py-func docutils literal notranslate"><span class="pre">ae()</span></code></a>), and <span class="math notranslate nohighlight">\(E_m\)</span> is the Mean AE (MAE) of the naive m-seasonal
forecast on the <cite>insample</cite> series <span class="math notranslate nohighlight">\(y_{0:t_p}\)</span> (the true series ending at <span class="math notranslate nohighlight">\(t_p\)</span>):</p>
<div class="math notranslate nohighlight">
\[E_m = MAE(y_{m:t_p}, y_{0:t_p - m}).\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>insample</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The training series used to forecast <cite>pred_series</cite> . This series serves to compute the scale of the error
obtained by a naive forecaster on the training data.</p></li>
<li><p><strong>m</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The seasonality to use for differencing to compute the error scale <span class="math notranslate nohighlight">\(E_m\)</span> (as described in the metric
description). <span class="math notranslate nohighlight">\(m=1\)</span> corresponds to a non-seasonal <span class="math notranslate nohighlight">\(E_m\)</span> (e.g. naive repetition of the last observed
value), whereas <span class="math notranslate nohighlight">\(m&gt;1\)</span> corresponds to a seasonal <span class="math notranslate nohighlight">\(E_m\)</span>.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>insample</cite> series is periodic ( <span class="math notranslate nohighlight">\(y_t = y_{t-m}\)</span> ) or any series in <cite>insample</cite> does not end one
time step before the start of the corresponding forecast in <cite>pred_series</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rfa0f437f94df-1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/">https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.coefficient_of_variation">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">coefficient_of_variation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#coefficient_of_variation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.coefficient_of_variation" title="Permalink to this definition">¶</a></dt>
<dd><p>Coefficient of Variation (percentage).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as a percentage value with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \text{RMSE}(y_t, \hat{y}_t) / \bar{y},\]</div>
<p>where <span class="math notranslate nohighlight">\(RMSE\)</span> is the Root Mean Squared Error (<a class="reference internal" href="#darts.metrics.metrics.rmse" title="darts.metrics.metrics.rmse"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmse()</span></code></a>), and <span class="math notranslate nohighlight">\(\bar{y}\)</span> is
the average of <span class="math notranslate nohighlight">\(y\)</span> over all time steps.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.dtw_metric">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">dtw_metric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric=&lt;function</span> <span class="pre">mae&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#dtw_metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.dtw_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Dynamic Time Warping to <cite>actual_series</cite> and <cite>pred_series</cite> before passing it into the metric.
Enables comparison between series of different lengths, phases and time indices.</p>
<p>Defaults to using <a class="reference internal" href="#darts.metrics.metrics.mae" title="darts.metrics.metrics.mae"><code class="xref py py-func docutils literal notranslate"><span class="pre">mae()</span></code></a> as a metric.</p>
<p>See <a class="reference internal" href="darts.dataprocessing.dtw.dtw.html#darts.dataprocessing.dtw.dtw.dtw" title="darts.dataprocessing.dtw.dtw.dtw"><code class="xref py py-func docutils literal notranslate"><span class="pre">dtw()</span></code></a> for more supported parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>metric</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]]) – The selected metric with signature ‘[[TimeSeries, TimeSeries], float]’ to use. Default: <cite>mae</cite>.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.err">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">err</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#err"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.err" title="Permalink to this definition">¶</a></dt>
<dd><p>Error (ERR).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[y_t - \hat{y}_t\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ic">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ic" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval Coverage (IC).</p>
<p>IC gives a binary outcome with <cite>1</cite> if the observation is within the interval, and <cite>0</cite> otherwise.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{equation}
    \begin{cases}
        1 &amp; \text{if } L_t &lt; y_t &lt; U_t \\
        0 &amp; \text{otherwise}
    \end{cases}
\end{equation}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(U_t\)</span> are the predicted upper bound quantile values <span class="math notranslate nohighlight">\(\hat{y}_{q_h,t}\)</span> (of all predicted
quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(L_t\)</span> are the predicted lower bound quantile values
<span class="math notranslate nohighlight">\(\hat{y}_{q_l,t}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n q intervals) without time
and component reductions, and shape (n time steps, n q intervals) without time but component reduction and
<cite>len(q_interval) &gt; 1</cite>. For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.incs_qr">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">incs_qr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetric=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#incs_qr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.incs_qr" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval Non-Conformity Score for Quantile Regression (INCS_QR).</p>
<p>INCS_QR gives the absolute error to the closest predicted quantile interval bound when the observation is outside
the interval. Otherwise, it gives the negative absolute error to the closer bound.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\max(L_t - y_t, y_t - U_t)\]</div>
<p>where <span class="math notranslate nohighlight">\(U_t\)</span> are the predicted upper bound quantile values <span class="math notranslate nohighlight">\(\hat{y}_{q_h,t}\)</span> (of all predicted
quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(L_t\)</span> are the predicted lower bound quantile values
<span class="math notranslate nohighlight">\(\hat{y}_{q_l,t}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>symmetric</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to return symmetric non-conformity scores. If <cite>False</cite>, returns asymmetric scores (individual scores
for lower- and upper quantile interval bounds; returned in the component axis).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n q intervals) without time
and component reductions, and shape (n time steps, n q intervals) without time but component reduction and
<cite>len(q_interval) &gt; 1</cite>. For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.interval_support">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">interval_support</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#interval_support"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.interval_support" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator adds support for quantile interval metrics with sanity checks, processing, and extraction of
quantiles from the intervals.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.iw">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">iw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#iw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.iw" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval Width (IW).</p>
<p>IL gives the width / length of predicted quantile intervals.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step
<span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[U_t - L_t,\]</div>
<p>where <span class="math notranslate nohighlight">\(U_t\)</span> are the predicted upper bound quantile values <span class="math notranslate nohighlight">\(\hat{y}_{q_h,t}\)</span> (of all predicted
quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(L_t\)</span> are the predicted lower bound quantile values
<span class="math notranslate nohighlight">\(\hat{y}_{q_l,t}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n q intervals) without time
and component reductions, and shape (n time steps, n q intervals) without time but component reduction and
<cite>len(q_interval) &gt; 1</cite>. For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.iws">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">iws</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#iws"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.iws" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval Winkler Score (IWS) <a class="reference internal" href="#r6c1f65bad7d3-1" id="id2">[1]</a>.</p>
<p>IWS gives the length / width of the quantile intervals plus a penalty if the observation is outside the interval.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{equation}
    \begin{cases}
        (U_t - L_t) + \frac{1}{q_l} (L_t - y_t) &amp; \text{if } y_t &lt; L_t \\
        (U_t - L_t) &amp; \text{if } L_t \leq y_t \leq U_t \\
        (U_t - L_t) + \frac{1}{1 - q_h} (y_t - U_t) &amp; \text{if } y_t &gt; U_t
    \end{cases}
\end{equation}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(U_t\)</span> are the predicted upper bound quantile values <span class="math notranslate nohighlight">\(\hat{y}_{q_h,t}\)</span> (of all predicted
quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(L_t\)</span> are the predicted lower bound quantile values
<span class="math notranslate nohighlight">\(\hat{y}_{q_l,t}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n q intervals) without time
and component reductions, and shape (n time steps, n q intervals) without time but component reduction and
<cite>len(q_interval) &gt; 1</cite>. For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r6c1f65bad7d3-1"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="https://otexts.com/fpp3/distaccuracy.html">https://otexts.com/fpp3/distaccuracy.html</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mae">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mae"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mae" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Absolute Error (MAE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{|y_t - \hat{y}_t|}\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mape">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mape" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Absolute Percentage Error (MAPE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and (optional) quantile with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \frac{1}{T} \sum_{t=1}^{T}{\left| \frac{y_t - \hat{y}_t}{y_t} \right|}\]</div>
<p>Note that it will raise a <cite>ValueError</cite> if <span class="math notranslate nohighlight">\(y_t = 0\)</span> for some <span class="math notranslate nohighlight">\(t\)</span>. Consider using
the Mean Absolute Scaled Error (<a class="reference internal" href="#darts.metrics.metrics.mase" title="darts.metrics.metrics.mase"><code class="xref py py-func docutils literal notranslate"><span class="pre">mase()</span></code></a>) in these cases.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>actual_series</cite> contains some zeros.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.marre">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">marre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#marre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.marre" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Absolute Ranged Relative Error (MARRE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and (optional) quantile with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \frac{1}{T} \sum_{t=1}^{T} {\left| \frac{y_t - \hat{y}_t} {\max_t{y_t} -
\min_t{y_t}} \right|}\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If <span class="math notranslate nohighlight">\(\max_t{y_t} = \min_t{y_t}\)</span>.</p></li>
<li><p><strong>float</strong> – <p>A single metric score for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</p></li>
<li><p><strong>np.ndarray</strong> – <p>A numpy array of metric scores. The array has shape (n components,) without component reduction. For:</p>
<ul>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</p></li>
<li><p><strong>list</strong><strong>[</strong><strong>float</strong><strong>]</strong> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><strong>list</strong><strong>[</strong><strong>np.ndarray</strong><strong>]</strong> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mase">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mase" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Absolute Scaled Error (MASE) (see <a class="reference internal" href="#rbb997f645b67-1" id="id3">[1]</a> for more information on scaled forecasting errors).</p>
<p>It is the Mean Absolute Error (MAE) scaled by the MAE of the naive m-seasonal forecast.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{MAE(y_{t_p+1:t_p+T}, \hat{y}_{t_p+1:t_p+T})}{E_m},\]</div>
<p>where <span class="math notranslate nohighlight">\(t_p\)</span> is the prediction time (one step before the first forecasted point), <span class="math notranslate nohighlight">\(MAE\)</span> is the Mean
Absolute Error (<a class="reference internal" href="#darts.metrics.metrics.mae" title="darts.metrics.metrics.mae"><code class="xref py py-func docutils literal notranslate"><span class="pre">mae()</span></code></a>), and <span class="math notranslate nohighlight">\(E_m\)</span> is the MAE of the naive m-seasonal
forecast on the <cite>insample</cite> series <span class="math notranslate nohighlight">\(y_{0:t_p}\)</span> (the true series ending at <span class="math notranslate nohighlight">\(t_p\)</span>):</p>
<div class="math notranslate nohighlight">
\[E_m = MAE(y_{m:t_p}, y_{0:t_p - m}).\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>insample</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The training series used to forecast <cite>pred_series</cite> . This series serves to compute the scale of the error
obtained by a naive forecaster on the training data.</p></li>
<li><p><strong>m</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The seasonality to use for differencing to compute the error scale <span class="math notranslate nohighlight">\(E_m\)</span> (as described in the metric
description). <span class="math notranslate nohighlight">\(m=1\)</span> corresponds to a non-seasonal <span class="math notranslate nohighlight">\(E_m\)</span> (e.g. naive repetition of the last observed
value), whereas <span class="math notranslate nohighlight">\(m&gt;1\)</span> corresponds to a seasonal <span class="math notranslate nohighlight">\(E_m\)</span>.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>insample</cite> series is periodic ( <span class="math notranslate nohighlight">\(y_t = y_{t-m}\)</span> ) or any series in <cite>insample</cite> does not end one
time step before the start of the corresponding forecast in <cite>pred_series</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rbb997f645b67-1"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/">https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.merr">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">merr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#merr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.merr" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Error (MERR).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{(y_t - \hat{y}_t)}\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mic">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mic" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Interval Coverage (MIC).</p>
<p>MIC gives the time-aggregated Interval Coverage <a class="reference internal" href="#darts.metrics.metrics.ic" title="darts.metrics.metrics.ic"><code class="xref py py-func docutils literal notranslate"><span class="pre">ic()</span></code></a> - the ratio of observations
being within the interval.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{C(y_t, \hat{y}_{t}, q_h, q_l)},\]</div>
<p>where <span class="math notranslate nohighlight">\(C\)</span> is the Interval Coverage <a class="reference internal" href="#darts.metrics.metrics.ic" title="darts.metrics.metrics.ic"><code class="xref py py-func docutils literal notranslate"><span class="pre">ic()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n q intervals,) without component reduction,
and shape (n q intervals,) with component reduction and <cite>len(q_interval) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mincs_qr">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mincs_qr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetric=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mincs_qr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mincs_qr" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Interval Non-Conformity Score for Quantile Regression (MINCS_QR).</p>
<p>MINCS_QR gives the time-aggregated INCS_QR <a class="reference internal" href="#darts.metrics.metrics.incs_qr" title="darts.metrics.metrics.incs_qr"><code class="xref py py-func docutils literal notranslate"><span class="pre">incs_qr()</span></code></a>.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{INCS_QR(y_t, \hat{y}_{t}, q_h, q_l)},\]</div>
<p>where <span class="math notranslate nohighlight">\(INCS_QR\)</span> is the Interval Non-Conformity Score for Quantile Regression
<a class="reference internal" href="#darts.metrics.metrics.incs_qr" title="darts.metrics.metrics.incs_qr"><code class="xref py py-func docutils literal notranslate"><span class="pre">incs_qr()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>symmetric</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to return symmetric non-conformity scores. If <cite>False</cite>, returns asymmetric scores (individual scores
for lower- and upper quantile interval bounds; returned in the component axis).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n q intervals,) without component reduction,
and shape (n q intervals,) with component reduction and <cite>len(q_interval) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.miw">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">miw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#miw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.miw" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Interval Width (MIW).</p>
<p>MIW gives the time-aggregated width / length of predicted quantile intervals.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step
<span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{U_t - L_t},\]</div>
<p>where <span class="math notranslate nohighlight">\(U_t\)</span> are the predicted upper bound quantile values <span class="math notranslate nohighlight">\(\hat{y}_{q_h,t}\)</span> (of all predicted
quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(L_t\)</span> are the predicted lower bound quantile values
<span class="math notranslate nohighlight">\(\hat{y}_{q_l,t}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n q intervals,) without component reduction,
and shape (n q intervals,) with component reduction and <cite>len(q_interval) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.miws">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">miws</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#miws"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.miws" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Interval Winkler Score (IWS) <a class="reference internal" href="#r29534b55a4e8-1" id="id4">[1]</a>.</p>
<p>MIWS gives the time-aggregated length / width of the quantile intervals plus a penalty if the observation is
outside the interval.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic or quantile series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>,
it is computed per component/column, quantile interval <span class="math notranslate nohighlight">\((q_l,q_h)\)</span>, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{W_t(y_t, \hat{y}_{t}, q_h, q_l)},\]</div>
<p>where <span class="math notranslate nohighlight">\(W\)</span> is the Winkler Score <a class="reference internal" href="#darts.metrics.metrics.iws" title="darts.metrics.metrics.iws"><code class="xref py py-func docutils literal notranslate"><span class="pre">iws()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q_interval</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The quantile interval(s) to compute the metric on. Must be a tuple (single interval) or sequence of tuples
(multiple intervals) with elements (low quantile, high quantile).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Quantiles <cite>q</cite> not supported by this metric; use <cite>q_interval</cite> instead.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score for (with <cite>len(q_interval) &lt;= 1</cite>):</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n q intervals,) without component reduction,
and shape (n q intervals,) with component reduction and <cite>len(q_interval) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the input from the <cite>float</cite> return case above but with <cite>len(q_interval) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r29534b55a4e8-1"><span class="brackets"><a class="fn-backref" href="#id4">1</a></span></dt>
<dd><p><a class="reference external" href="https://otexts.com/fpp3/distaccuracy.html">https://otexts.com/fpp3/distaccuracy.html</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mql">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mql" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Quantile Loss (MQL).</p>
<p>Also known as Pinball Loss. QL is a metric that quantifies the accuracy of a specific quantile <span class="math notranslate nohighlight">\(q\)</span> from the
predicted deterministic quantiles or value distribution of a stochastic/probabilistic <cite>pred_series</cite> containing N
samples.</p>
<p>MQL first computes the quantile of all sample values and the loss per time step, and then takes the mean over the
time axis.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic/probabilistic series (containing N samples) <span class="math notranslate nohighlight">\(\hat{y}\)</span>
of of shape <span class="math notranslate nohighlight">\(T \times N\)</span>, it is computed per column/component and quantile as:</p>
<div class="math notranslate nohighlight">
\[2 \frac{1}{T}\sum_{t=1}^T{\max((q - 1) (y_t - \hat{y}_{t,q}), q (y_t - \hat{y}_{t,q}))},\]</div>
<p>where <span class="math notranslate nohighlight">\(\hat{y}_{t,q}\)</span> is quantile value <span class="math notranslate nohighlight">\(q\)</span> (of all predicted quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>.
The factor <cite>2</cite> makes the loss more interpretable, as for <cite>q=0.5</cite> the loss is identical to the Mean Absolute Error
(<a class="reference internal" href="#darts.metrics.metrics.mae" title="darts.metrics.metrics.mae"><code class="xref py py-func docutils literal notranslate"><span class="pre">mae()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>]]) – The quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.mse">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">mse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#mse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.mse" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Squared Error (MSE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{1}{T}\sum_{t=1}^T{(y_t - \hat{y}_t)^2}.\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.msse">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">msse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#msse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.msse" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Squared Scaled Error (MSSE) (see <a class="reference internal" href="#rb598f7b954d8-1" id="id5">[1]</a> for more information on scaled forecasting errors).</p>
<p>It is the Mean Squared Error (MSE) scaled by the MSE of the naive m-seasonal forecast.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{MSE(y_{t_p+1:t_p+T}, \hat{y}_{t_p+1:t_p+T})}{E_m},\]</div>
<p>where <span class="math notranslate nohighlight">\(t_p\)</span> is the prediction time (one step before the first forecasted point), <span class="math notranslate nohighlight">\(MSE\)</span> is the Mean
Squared Error (<a class="reference internal" href="#darts.metrics.metrics.mse" title="darts.metrics.metrics.mse"><code class="xref py py-func docutils literal notranslate"><span class="pre">mse()</span></code></a>), and <span class="math notranslate nohighlight">\(E_m\)</span> is the MSE of the naive m-seasonal
forecast on the <cite>insample</cite> series <span class="math notranslate nohighlight">\(y_{0:t_p}\)</span> (the true series ending at <span class="math notranslate nohighlight">\(t_p\)</span>):</p>
<div class="math notranslate nohighlight">
\[E_m = MSE(y_{m:t_p}, y_{0:t_p - m}).\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>insample</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The training series used to forecast <cite>pred_series</cite> . This series serves to compute the scale of the error
obtained by a naive forecaster on the training data.</p></li>
<li><p><strong>m</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The seasonality to use for differencing to compute the error scale <span class="math notranslate nohighlight">\(E_m\)</span> (as described in the metric
description). <span class="math notranslate nohighlight">\(m=1\)</span> corresponds to a non-seasonal <span class="math notranslate nohighlight">\(E_m\)</span> (e.g. naive repetition of the last observed
value), whereas <span class="math notranslate nohighlight">\(m&gt;1\)</span> corresponds to a seasonal <span class="math notranslate nohighlight">\(E_m\)</span>.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>insample</cite> series is periodic ( <span class="math notranslate nohighlight">\(y_t = y_{t-m}\)</span> ) or any series in <cite>insample</cite> does not end one
time step before the start of the corresponding forecast in <cite>pred_series</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rb598f7b954d8-1"><span class="brackets"><a class="fn-backref" href="#id5">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/">https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.multi_ts_support">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">multi_ts_support</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#multi_ts_support"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.multi_ts_support" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator further adapts the metrics that took as input two (or three for scaled metrics with <cite>insample</cite>)
univariate/multivariate <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> instances, adding support for equally-sized sequences of <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>
instances. The decorator computes the pairwise metric for <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> with the same indices, and returns a float
value that is computed as a function of all the pairwise metrics using a <cite>series_reduction</cite> subroutine passed as
argument to the metric function.</p>
<p>If a ‘Sequence[TimeSeries]’ is passed as input, this decorator provides also parallelisation of the metric
evaluation regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> (if the <cite>n_jobs</cite> parameter is not set 1).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.multivariate_support">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">multivariate_support</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#multivariate_support"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.multivariate_support" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator transforms a metric function that takes as input two univariate TimeSeries instances
into a function that takes two equally-sized multivariate TimeSeries instances, computes the pairwise univariate
metrics for components with the same indices, and returns a float value that is computed as a function of all the
univariate metrics using a <cite>component_reduction</cite> subroutine passed as argument to the metric function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ope">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ope" title="Permalink to this definition">¶</a></dt>
<dd><p>Overall Percentage Error (OPE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and (optional) quantile with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \left| \frac{\sum_{t=1}^{T}{y_t}
- \sum_{t=1}^{T}{\hat{y}_t}}{\sum_{t=1}^{T}{y_t}} \right|.\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <span class="math notranslate nohighlight">\(\sum_{t=1}^{T}{y_t} = 0\)</span>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.ql">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">ql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#ql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.ql" title="Permalink to this definition">¶</a></dt>
<dd><p>Quantile Loss (QL).</p>
<p>Also known as Pinball Loss. QL is a metric that quantifies the accuracy of a specific quantile <span class="math notranslate nohighlight">\(q\)</span> from the
predicted deterministic quantiles or value distribution of a stochastic/probabilistic <cite>pred_series</cite> containing N
samples.</p>
<p>QL computes the quantile of all sample values and the loss per time step.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic/probabilistic series (containing N samples) <span class="math notranslate nohighlight">\(\hat{y}\)</span>
of of shape <span class="math notranslate nohighlight">\(T \times N\)</span>, it is computed per column/component, quantile and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[2 \max((q - 1) (y_t - \hat{y}_{t,q}), q (y_t - \hat{y}_{t,q})),\]</div>
<p>where <span class="math notranslate nohighlight">\(\hat{y}_{t,q}\)</span> is quantile value <span class="math notranslate nohighlight">\(q\)</span> (of all predicted quantiles or samples) at time <span class="math notranslate nohighlight">\(t\)</span>.
The factor <cite>2</cite> makes the loss more interpretable, as for <cite>q=0.5</cite> the loss is identical to the Absolute Error
(<a class="reference internal" href="#darts.metrics.metrics.ae" title="darts.metrics.metrics.ae"><code class="xref py py-func docutils literal notranslate"><span class="pre">ae()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>]]) – The quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.qr">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">qr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#qr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.qr" title="Permalink to this definition">¶</a></dt>
<dd><p>Quantile Risk (QR)</p>
<p>QR is a metric that quantifies the accuracy of a specific quantile <span class="math notranslate nohighlight">\(q\)</span> from the predicted value
distribution of a stochastic/probabilistic <cite>pred_series</cite> containing N samples.</p>
<p>The main difference to the Quantile Loss (QL) is that QR computes the quantile and loss on the aggregate of all
sample values summed up along the time axis (QL computes the quantile and loss per time step).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted stochastic/probabilistic series (containing N samples) <span class="math notranslate nohighlight">\(\hat{y}\)</span>
of of shape <span class="math notranslate nohighlight">\(T \times N\)</span>, it is computed per column/component and quantile as:</p>
<div class="math notranslate nohighlight">
\[2 \frac{QL(Z, \hat{Z}_q)}{Z},\]</div>
<p>where <span class="math notranslate nohighlight">\(QL\)</span> is the Quantile Loss (<a class="reference internal" href="#darts.metrics.metrics.ql" title="darts.metrics.metrics.ql"><code class="xref py py-func docutils literal notranslate"><span class="pre">ql()</span></code></a>), <span class="math notranslate nohighlight">\(Z = \sum_{t=1}^{T} y_t\)</span> is
the sum of all target/actual values, <span class="math notranslate nohighlight">\(\hat{Z} = \sum_{t=1}^{T} \hat{y}_t\)</span> is the sum of all predicted
samples along the time axis, and <span class="math notranslate nohighlight">\(\hat{Z}_q\)</span> is the quantile <span class="math notranslate nohighlight">\(q\)</span> of that sum.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>]]) – The quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.r2_score">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">r2_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#r2_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.r2_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Coefficient of Determination <span class="math notranslate nohighlight">\(R^2\)</span> (see <a class="reference internal" href="#r8f5401e9d931-1" id="id6">[1]</a> for more details).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[1 - \frac{\sum_{t=1}^T{(y_t - \hat{y}_t)^2}}{\sum_{t=1}^T{(y_t - \bar{y})^2}},\]</div>
<p>where <span class="math notranslate nohighlight">\(\bar{y}\)</span> is the mean of <span class="math notranslate nohighlight">\(y\)</span> over all time steps.</p>
<p>This metric is not symmetric.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r8f5401e9d931-1"><span class="brackets"><a class="fn-backref" href="#id6">1</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/Coefficient_of_determination">https://en.wikipedia.org/wiki/Coefficient_of_determination</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.rmse">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">rmse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#rmse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.rmse" title="Permalink to this definition">¶</a></dt>
<dd><p>Root Mean Squared Error (RMSE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\sqrt{\frac{1}{T}\sum_{t=1}^T{(y_t - \hat{y}_t)^2}}\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.rmsle">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">rmsle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#rmsle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.rmsle" title="Permalink to this definition">¶</a></dt>
<dd><p>Root Mean Squared Log Error (RMSLE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\sqrt{\frac{1}{T}\sum_{t=1}^T{\left(\log{(y_t + 1)} - \log{(\hat{y}_t + 1)}\right)^2}}\]</div>
<p>using the natural logarithm.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.rmsse">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">rmsse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#rmsse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.rmsse" title="Permalink to this definition">¶</a></dt>
<dd><p>Root Mean Squared Scaled Error (RMSSE) (see <a class="reference internal" href="#rcf05950e705d-1" id="id7">[1]</a> for more information on scaled forecasting errors).</p>
<p>It is the Root Mean Squared Error (RMSE) scaled by the RMSE of the naive m-seasonal forecast.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column and (optional) quantile as:</p>
<div class="math notranslate nohighlight">
\[\frac{RMSE(y_{t_p+1:t_p+T}, \hat{y}_{t_p+1:t_p+T})}{E_m},\]</div>
<p>where <span class="math notranslate nohighlight">\(t_p\)</span> is the prediction time (one step before the first forecasted point), <span class="math notranslate nohighlight">\(RMSE\)</span> is the Root
Mean Squared Error (<a class="reference internal" href="#darts.metrics.metrics.rmse" title="darts.metrics.metrics.rmse"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmse()</span></code></a>), and <span class="math notranslate nohighlight">\(E_m\)</span> is the RMSE of the naive m-seasonal
forecast on the <cite>insample</cite> series <span class="math notranslate nohighlight">\(y_{0:t_p}\)</span> (the true series ending at <span class="math notranslate nohighlight">\(t_p\)</span>):</p>
<div class="math notranslate nohighlight">
\[E_m = RMSE(y_{m:t_p}, y_{0:t_p - m}).\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>insample</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The training series used to forecast <cite>pred_series</cite> . This series serves to compute the scale of the error
obtained by a naive forecaster on the training data.</p></li>
<li><p><strong>m</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The seasonality to use for differencing to compute the error scale <span class="math notranslate nohighlight">\(E_m\)</span> (as described in the metric
description). <span class="math notranslate nohighlight">\(m=1\)</span> corresponds to a non-seasonal <span class="math notranslate nohighlight">\(E_m\)</span> (e.g. naive repetition of the last observed
value), whereas <span class="math notranslate nohighlight">\(m&gt;1\)</span> corresponds to a seasonal <span class="math notranslate nohighlight">\(E_m\)</span>.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>insample</cite> series is periodic ( <span class="math notranslate nohighlight">\(y_t = y_{t-m}\)</span> ) or any series in <cite>insample</cite> does not end one
time step before the start of the corresponding forecast in <cite>pred_series</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rcf05950e705d-1"><span class="brackets"><a class="fn-backref" href="#id7">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/">https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.sape">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">sape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#sape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.sape" title="Permalink to this definition">¶</a></dt>
<dd><p>symmetric Absolute Percentage Error (sAPE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column, (optional) quantile and time step <span class="math notranslate nohighlight">\(t\)</span> with:</p>
<div class="math notranslate nohighlight">
\[200 \cdot \frac{\left| y_t - \hat{y}_t \right|}{\left| y_t \right| + \left| \hat{y}_t \right|}\]</div>
<p>Note that it will raise a <cite>ValueError</cite> if <span class="math notranslate nohighlight">\(\left| y_t \right| + \left| \hat{y}_t \right| = 0\)</span> for some
<span class="math notranslate nohighlight">\(t\)</span>. Consider using the Absolute Scaled Error (<a class="reference internal" href="#darts.metrics.metrics.ase" title="darts.metrics.metrics.ase"><code class="xref py py-func docutils literal notranslate"><span class="pre">ase()</span></code></a>)  in these cases.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>actual_series</cite> and <cite>pred_series</cite> contain some zeros at the same time index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.se">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">se</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#se"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.se" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared Error (SE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[(y_t - \hat{y}_t)^2.\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.sle">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">sle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#sle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.sle" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared Log Error (SLE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\left(\log{(y_t + 1)} - \log{(\hat{y} + 1)}\right)^2\]</div>
<p>using the natural logarithm.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.smape">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">smape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#smape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.smape" title="Permalink to this definition">¶</a></dt>
<dd><p>symmetric Mean Absolute Percentage Error (sMAPE).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and (optional) quantile with:</p>
<div class="math notranslate nohighlight">
\[200 \cdot \frac{1}{T}
\sum_{t=1}^{T}{\frac{\left| y_t - \hat{y}_t \right|}{\left| y_t \right| + \left| \hat{y}_t \right|} }\]</div>
<p>Note that it will raise a <cite>ValueError</cite> if <span class="math notranslate nohighlight">\(\left| y_t \right| + \left| \hat{y}_t \right| = 0\)</span>
for some <span class="math notranslate nohighlight">\(t\)</span>. Consider using the Mean Absolute Scaled Error (<a class="reference internal" href="#darts.metrics.metrics.mase" title="darts.metrics.metrics.mase"><code class="xref py py-func docutils literal notranslate"><span class="pre">mase()</span></code></a>) in these
cases.</p>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>actual_series</cite> and the <cite>pred_series</cite> contain some zeros at the same time index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.sse">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">sse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#sse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.sse" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared Scaled Error (SSE) (see <a class="reference internal" href="#rd5f48f355bfb-1" id="id8">[1]</a> for more information on scaled forecasting errors).</p>
<p>It is the Squared Error (SE) scaled by the Mean SE (MSE) of the naive m-seasonal forecast.</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed per
component/column, (optional) quantile, and time step <span class="math notranslate nohighlight">\(t\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\frac{SE(y_{t_p+1:t_p+T}, \hat{y}_{t_p+1:t_p+T})}{E_m},\]</div>
<p>where <span class="math notranslate nohighlight">\(t_p\)</span> is the prediction time (one step before the first forecasted point), <span class="math notranslate nohighlight">\(SE\)</span> is the Squared
Error (<a class="reference internal" href="#darts.metrics.metrics.se" title="darts.metrics.metrics.se"><code class="xref py py-func docutils literal notranslate"><span class="pre">se()</span></code></a>), and <span class="math notranslate nohighlight">\(E_m\)</span> is the Mean SE (MSE) of the naive m-seasonal
forecast on the <cite>insample</cite> series <span class="math notranslate nohighlight">\(y_{0:t_p}\)</span> (the true series ending at <span class="math notranslate nohighlight">\(t_p\)</span>):</p>
<div class="math notranslate nohighlight">
\[E_m = MSE(y_{m:t_p}, y_{0:t_p - m}).\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>insample</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The training series used to forecast <cite>pred_series</cite> . This series serves to compute the scale of the error
obtained by a naive forecaster on the training data.</p></li>
<li><p><strong>m</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The seasonality to use for differencing to compute the error scale <span class="math notranslate nohighlight">\(E_m\)</span> (as described in the metric
description). <span class="math notranslate nohighlight">\(m=1\)</span> corresponds to a non-seasonal <span class="math notranslate nohighlight">\(E_m\)</span> (e.g. naive repetition of the last observed
value), whereas <span class="math notranslate nohighlight">\(m&gt;1\)</span> corresponds to a seasonal <span class="math notranslate nohighlight">\(E_m\)</span>.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>time_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the time axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(c,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
time axis. If <cite>None</cite>, will return a metric per time step.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>insample</cite> series is periodic ( <span class="math notranslate nohighlight">\(y_t = y_{t-m}\)</span> ) or any series in <cite>insample</cite> does not end one
time step before the start of the corresponding forecast in <cite>pred_series</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite>, <cite>component_reduction</cite> and
<cite>time_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n time steps, n components * n quantiles) without time
and component reductions, and shape (n time steps, n quantiles) without time but component reduction and
<cite>len(q) &gt; 1</cite>. For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a single uni/multivariate series and at least <cite>time_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and at least one of
<cite>component_reduction=None</cite> or <cite>time_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rd5f48f355bfb-1"><span class="brackets"><a class="fn-backref" href="#id8">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/">https://www.pmorgan.com.au/tutorials/mae%2C-mape%2C-mase-and-the-scaled-rmse/</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="darts.metrics.metrics.wmape">
<span class="sig-prename descclassname"><span class="pre">darts.metrics.metrics.</span></span><span class="sig-name descname"><span class="pre">wmape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_reduction=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_reduction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/darts/metrics/metrics.html#wmape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#darts.metrics.metrics.wmape" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighted Mean Absolute Percentage Error (WMAPE). (see <a class="reference internal" href="#r383dbe9c3466-1" id="id9">[1]</a> for more information).</p>
<p>For the true series <span class="math notranslate nohighlight">\(y\)</span> and predicted series <span class="math notranslate nohighlight">\(\hat{y}\)</span> of length <span class="math notranslate nohighlight">\(T\)</span>, it is computed as a
percentage value per component/column and (optional) quantile with:</p>
<div class="math notranslate nohighlight">
\[100 \cdot \frac{\sum_{t=1}^T |y_t - \hat{y}_t|}{\sum_{t=1}^T |y_t|}\]</div>
<p>If <span class="math notranslate nohighlight">\(\hat{y}_t\)</span> are stochastic (contains several samples) or quantile predictions, use parameter <cite>q</cite> to
specify on which quantile(s) to compute the metric on. By default, it uses the median 0.5 quantile
(over all samples, or, if given, the quantile prediction itself).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) actual series.</p></li>
<li><p><strong>pred_series</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="darts.timeseries.html#darts.timeseries.TimeSeries" title="darts.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>]]) – The (sequence of) predicted series.</p></li>
<li><p><strong>intersect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – For time series that are overlapping in time without having the same time index, setting <cite>True</cite>
will consider the values only over their common time interval (intersection in time).</p></li>
<li><p><strong>q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, the quantile (float [0, 1]) or list of quantiles of interest to compute the metric on.</p></li>
<li><p><strong>component_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over the component/column axis. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t,)</cite>. The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>1</cite> corresponding to the
component axis. If <cite>None</cite>, will return a metric per component.</p></li>
<li><p><strong>series_reduction</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Optionally, a function to aggregate the metrics over multiple series. It must reduce a <cite>np.ndarray</cite>
of shape <cite>(s, t, c)</cite> to a <cite>np.ndarray</cite> of shape <cite>(t, c)</cite> The function takes as input a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and a
parameter named <cite>axis</cite>, and returns the reduced array. The <cite>axis</cite> receives value <cite>0</cite> corresponding to the
series axis. For example with <cite>np.nanmean</cite>, will return the average over all series metrics. If <cite>None</cite>, will
return a metric per component.</p></li>
<li><p><strong>n_jobs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of jobs to run in parallel. Parallel jobs are created only when a <code class="docutils literal notranslate"><span class="pre">Sequence[TimeSeries]</span></code> is
passed as input, parallelising operations regarding different <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code>. Defaults to <cite>1</cite>
(sequential). Setting the parameter to <cite>-1</cite> means using all the available processors.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Optionally, whether to print operations progress</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>actual_series</cite> contains some zeros.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> – A single metric score (when <cite>len(q) &lt;= 1</cite>) for:</p>
<ul>
<li><p>a single univariate series.</p></li>
<li><p>a single multivariate series with <cite>component_reduction</cite>.</p></li>
<li><p>a sequence (list) of uni/multivariate series with <cite>series_reduction</cite> and <cite>component_reduction</cite>.</p></li>
</ul>
</li>
<li><p><em>np.ndarray</em> – A numpy array of metric scores. The array has shape (n components * n quantiles,) without component reduction,
and shape (n quantiles,) with component reduction and <cite>len(q) &gt; 1</cite>.
For:</p>
<ul>
<li><p>the same input arguments that result in the <cite>float</cite> return case from above but with <cite>len(q) &gt; 1</cite>.</p></li>
<li><p>a single multivariate series and at least <cite>component_reduction=None</cite>.</p></li>
<li><p>a sequence of uni/multivariate series including <cite>series_reduction</cite> and <cite>component_reduction=None</cite>.</p></li>
</ul>
</li>
<li><p><em>list[float]</em> – Same as for type <cite>float</cite> but for a sequence of series.</p></li>
<li><p><em>list[np.ndarray]</em> – Same as for type <cite>np.ndarray</cite> but for a sequence of series.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r383dbe9c3466-1"><span class="brackets"><a class="fn-backref" href="#id9">1</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/Mean_absolute_percentage_error#WMAPE">https://en.wikipedia.org/wiki/Mean_absolute_percentage_error#WMAPE</a></p>
</dd>
</dl>
</dd></dl>

</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="darts.metrics.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Metrics</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="darts.models.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Models</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020 - 2025, Unit8 SA (Apache 2.0 License).<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>